/* unitz 1.0.0 - A unit parser, converter, & combiner in JS by Philip Diffenderfer */
!function(e,s){function r(e){return"string"==typeof e}function n(e){return null!==e&&"object"==typeof e}function i(e){return"number"==typeof e&&!isNaN(e)}function t(e){return e instanceof Array}function o(e){this.className=e,this.converters={},this.mapping={},this.bases={},this.groups=[],this.groupMap={}}var a={classes:[],classMap:{},units:{},regex:/^\s*(\d*)(\/(\d+)|\.(\d+)|)\s*(.*)\s*$/i,epsilon:1e-4,separator:",",parse:function(e){var s=this.regex.exec(e),r=s[1],n=s[3],i=s[4],t=s[5].toLowerCase();if(!r&&!i&&!t)return!1;var o=1;r&&(o=parseInt(r),n?o/=parseInt(n):i&&(o+=1/parseInt(i)));var a={value:o,unit:t,normal:e,unitClass:this.units[t],convert:this.convertThis};if(a.unitClass){var s=a.unitClass.groupMap[t];a.normal=this.isOne(o)?o+" "+s.singular:o+" "+s.plural}return a},convertThis:function(e,s,r,n){var i=a.convert(this,e);if(i!==!1&&s){var o=this.unitClass?this.unitClass.groupMap[this.unit].denominators:n;t(o)&&(i=a.toFraction(i,o,r))}return i},convert:function(e,s){var r=this.parseInput(e);if(!n(r))return!1;var i=r.value,t=r.unitClass;if(!t&&!s)return i;if(!(t&&s in t.converters))return!1;if(t.groupMap[s]===t.groupMap[r.unit])return i;i*=t.converters[r.unit];var o=t.bases[r.unit],a=t.bases[s];return o!==a&&(i*=t.mapping[o][a]),i/=t.converters[s]},combine:function(e,s){for(var n=r(e)?e.split(this.separator):[e],i=r(s)?s.split(this.separator):[s],t=n.concat(i),o=[],a=0;a<t.length;a++){var u=this.parseInput(t[a]);u!==!1&&o.push(u)}},parseInput:function(e){return r(e)?this.parse(e):n(e)?e:i(e)?{value:e,unit:"",unitClass:null,convert:this.convertThis}:!1},conversions:function(e,s){var r=this.parseInput(e);if(!n(r)||!r.unitClass)return e;for(var i=r.unitClass.groups,t=r.conversions=[],o=0;o<i.length;o++){var a=i[o];if(a.unit!==r.unit){var u=r.convert(a.unit),c=this.toFraction(u,a.denominators,s),l=this.isOne(u);t.push({decimal:u,fraction:c,"short":a.unit,"long":l?a.singular:a.plural,group:a})}}return r},isOne:function(e){return Math.abs(e-1)<this.epsilon},toFraction:function(e,s,r){for(var n=Math.abs(Math.floor(e)-e),i=1,t=e,o=0;o<s.length&&n>this.epsilon;o++){var a=s[o];if(r&&a>r)break;var u=Math.round(e*a),c=Math.abs(Math.floor(u/a)-e);c-this.epsilon<n&&(i=a,t=u,n=c)}if(1===i)return t;var l=Math.floor(t/i),d=Math.round(e-l)*i,m={numerator:t,denominator:i,remainder:d,whole:l,string:0===l?t+"/"+i:l+" "+d+"/"+i};return m},addClass:function(e){this.classMap[e.className]=e,this.classes.push(e);for(var s in e.converters)this.units[s]=e}};o.prototype={addGroup:function(e,s,r,n,i,t){var o=r[0],a=o;s&&(e*=this.converters[s],a=this.bases[s]);for(var u={unit:o,units:r,singular:i,plural:t,denominators:n},c=0;c<r.length;c++){var l=r[c];this.converters[l]=e,this.bases[l]=a,this.groupMap[l]=u}this.groups.push(u)},addOneBaseConversion:function(e,s,r){e in this.mapping||(this.mapping[e]={}),this.mapping[e][s]=r},addBaseConversion:function(e,s,r){this.addOneBaseConversion(e,s,r),this.addOneBaseConversion(s,e,1/r)}},a.addClass(function(){var e=new o("Length");return e.addGroup(1,null,["in","inch","inches",'"'],[2,3,4,8,16,32],"inch","inches"),e.addGroup(12,"in",["ft","foot","feet","'"],[2,3,4,12],"foot","feet"),e.addGroup(3,"ft",["yd","yard","yards"],[3],"yard","yards"),e.addGroup(5280,"ft",["mi","mile","miles"],[2,3,4,5,6,7,8,9,10],"mile","miles"),e.addGroup(3,"mi",["league","leagues"],[2,3,4,5,6,7,8,9,10],"league","leagues"),e.addGroup(1,null,["mm","millimeter","millimeters"],[10],"millimeter","millimeters"),e.addGroup(10,"mm",["cm","centimeter","centimeters"],[2,4,10],"centimeter","centimeters"),e.addGroup(10,"cm",["dc","decimeter","decimeters"],[10],"decimeter","decimeters"),e.addGroup(100,"cm",["m","meter","meters"],[2,3,4,5,10],"meter","meters"),e.addGroup(1e3,"m",["km","kilometer","kilometers"],[2,3,4,5,6,7,8,9,10],"kilometer","kilometers"),e.addBaseConversion("in","mm",25.4),e}()),a.addClass(function(){var e=new o("Time");return e.addGroup(1,null,["ns","nanosecond","nanoseconds","nano","nanos"],[10,100],"nanosecond","nanoseconds"),e.addGroup(1e3,"ns",["us","microsecond","microseconds","micros","micro"],[10,100,1e3],"microsecond","microseconds"),e.addGroup(1e3,"us",["ms","millisecond","milliseconds","millis"],[10,100,1e3],"millisecond","milliseconds"),e.addGroup(1e3,"ms",["s","second","seconds","sec","secs"],[2,10,100,1e3],"second","seconds"),e.addGroup(60,"s",["min","minute","minutes","mins"],[2,3,4,60],"minute","minutes"),e.addGroup(60,"min",["hr","hour","hours","hrs"],[2,3,4,60],"hour","hours"),e.addGroup(24,"hr",["day","days"],[2,3,4,6,24],"day","days"),e.addGroup(7,"day",["wk","week","weeks","wks"],[7],"week","weeks"),e.addGroup(365.2425,"day",["yr","year","years","yrs"],[2,3,4,6,12,52],"year","years"),e}()),a.addClass(function(){var e=new o("Volume");return e.addGroup(1,null,["tsp","ts","tsps","teaspoon","teaspoons"],[2,3,4],"teaspoon","teaspoons"),e.addGroup(3,"tsp",["tbsp","tbsps","tablespoon","tablespoons"],[2,3,4],"tablespoon","tablespoons"),e.addGroup(6,"tsp",["oz","ounce","ounces","fl-oz","fl oz","floz","fluid ounce","fl. oz.","oz. fl.","oz fl"],[2,3,6],"fluid ounce","fluid ounces"),e.addGroup(8,"oz",["c","cup","cups"],[2,3,4],"cup","cups"),e.addGroup(2,"c",["pt","pint","pints"],[2,4],"pint","pints"),e.addGroup(4,"c",["qt","quart","quarts"],[2,4],"quart","quarts"),e.addGroup(4,"qt",["gal","gallon","gallons"],[2,4,8,16],"gallon","gallons"),e.addGroup(1,null,["ml","millilitre","millilitres"],[2,10],"millilitre","millilitres"),e.addGroup(1e3,"ml",["l","litre","litres"],[2,10],"litre","litres"),e.addGroup(1,null,["mm3","mm^3","cubic mm","cubic millimeter","cubic millimeters"],[2,4,8],"cubic millimeter","cubic millimeters"),e.addGroup(100,"mm3",["cm3","cm^3","cubiccmm","cubic centimeter","cubic centimeters"],[2,4,8],"cubic centimeter","cubic centimeters"),e.addGroup(1e4,"cm3",["m3","m^3","cubic m","cubic meter","cubic meters"],[2,4,8],"cubic meter","cubic meters"),e.addGroup(1e6,"m3",["km3","km^3","cubic km","meter","meters"],[2,4,8],"meter","meters"),e.addGroup(1,null,["in3","in^3","cubic in","cubic inch","cubic inches"],[2,4,8],"cubic inch","cubic inches"),e.addGroup(144,"in3",["ft3","ft^3","cubic ft","cubic foot","cubic feet"],[2,4,8],"cubic foot","cubic feet"),e.addGroup(27,"ft3",["yd3","yd^3","cubic yd","cubic yard","cubic yards"],[2,4,8],"cubic yard","cubic yards"),e.addBaseConversion("tsp","ml",4.92892),e.addBaseConversion("ml","mm3",1),e.addBaseConversion("tsp","in3",.300781),e}()),a.addClass(function(){var e=new o("Weight");return e.addGroup(1,null,["mg","milligram","milligrams"],[2,10],"milligram","milligrams"),e.addGroup(1e3,"mg",["g","gram","grams"],[2,10,100],"gram","grams"),e.addGroup(1e3,"g",["kg","kilogram","kilograms","kilo","kilos"],[2,10,100],"kilogram","kilograms"),e.addGroup(1,null,["oz","ounce","ounces"],[2,3,4,10],"ounce","ounces"),e.addGroup(16,"oz",["lb","lbs","pound","pounds"],[2,3,4,16],"pound","pounds"),e.addGroup(2e3,"lb",["ton","tons","tonnes"],[2,3,4,10],"ton","tons"),e.addBaseConversion("mg","oz",35274e-9),e}()),e.Unitz=a}(this);
//# sourceMappingURL=unitz.min.js.map
