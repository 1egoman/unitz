/* unitz 0.3.0 - A unit parser, converter, & combiner in JS by Philip Diffenderfer */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Unitz=t()}(this,function(){function e(e){return"string"==typeof e}function t(e){return null!==e&&"object"==typeof e}function i(e){return"number"==typeof e&&!isNaN(e)}function r(e){return e instanceof Array}function s(e){return i(e)&&Math.abs(Math.abs(e)-1)<w.epsilon}function n(e){return i(e)&&Math.abs(Math.floor(e)-e)<1e-8}function a(e,t){return e.substring(0,w.heuristicLength)===t.substring(0,w.heuristicLength)}function u(e,t){return t?e+" "+t:e}function o(s){return e(s)?s.split(w.separator):r(s)?s:t(s)||i(s)?[s]:[]}function l(r){return e(r)?d(r):t(r)?r:i(r)?q.fromNumber(r):!1}function d(e){var t=w.regex.exec(e),i=t[1],r=t[3],s=t[5],n=t[6],a=t[7].toLowerCase();if(!i&&!n&&!a)return!1;var u=1;if(i){u=parseInt(i);var o=0>u?-1:1;s?(s=parseInt(s),r?u+=parseInt(r)/s*o:u/=s):n&&(u+=parseFloat("0."+n)*o)}return new q(u,a,U[a],e)}function c(e,t,i){var r=l(e);if(r.unitClass){for(var s=null,n=null,a=r.unitClass.groups,o=0;o<a.length;o++){var d=a[o],c=r.convert(d.unit,!0);if(c.valid){var m=!s;if(s){var p=c.distance<=s.distance,b=c.string.length<=s.string.length,h=(c.actual+"").length<=(s.actual+"").length;p&&(t?b:h)&&(m=!0)}m&&(s=c,n=d)}}s&&(r===e?r=new q(s.actual,n.unit,r.unitClass):(r.value=s.actual,r.unit=n.unit,r.group=n),r.normal=t?u(s.string,n.getUnit(s.isSingular())):n.addUnit(s.actual))}return r}function m(e,i){var r=l(e);if(!t(r))return!1;var s=r.value,n=r.unitClass;if(!n&&!i)return s;if(!(n&&i in n.converters))return!1;if(n.groupMap[i]===n.groupMap[r.unit])return s;s*=n.converters[r.unit];var a=n.bases[r.unit],u=n.bases[i];return a!==u&&(s*=n.mapping[a][u]),s/=n.converters[i]}function p(e,t){for(var i="",r=0;r<e.length;r++){var s=e[r];s.length&&(""===i||t&&s.length<i.length||!t&&s.length>i.length)&&(i=s)}return i}function b(e,t,i,r){for(var n=o(e),d=o(t),m=n.concat(d),b=[],h=0;h<m.length;h++){var g=l(m[h]);g!==!1&&(g.units=[],g.units.push(g.unit),b.push(g))}for(var h=0;h<b.length-1;h++)for(var f=b[h],v=b.length-1;v>h;v--){var y=b[v],q=y.convert(f.unit);q!==!1&&f.group?(b.splice(v,1),f.value+=q):f.unit&&y.unit?a(f.unit,y.unit)&&(b.splice(v,1),f.value+=y.value,f.units=f.units.concat(y.units)):(b.splice(v,1),f.value+=y.value,f.units=f.units.concat(y.units))}for(var G=[],h=0;h<b.length;h++){var f=b[h];f.group?f.normal=f.group.addUnit(f.value):(f.unit=p(f.units,s(f.value)),f.normal=u(f.value,f.unit));var k=c(f,i,r);k&&k.normal&&G.push(k.normal)}return G.join(w.separatorJoin)}function h(e,t,i,r,n){for(var d=o(e),m=o(t),b=d.concat(m),h=[],g=0;g<b.length;g++){var f=l(b[g]);f!==!1&&(f.sign=g>=d.length?-1:1,f.units=[],f.units.push(f.unit),h.push(f))}for(var g=0;g<h.length-1;g++)for(var v=h[g],y=h.length-1;y>g;y--){var q=h[y],G=q.convert(v.unit),k=q.sign*v.sign;G!==!1&&v.group?(h.splice(y,1),v.value+=G*k):v.unit&&q.unit?a(v.unit,q.unit)&&(h.splice(y,1),v.value+=q.value*k,v.units=v.units.concat(q.units)):(h.splice(y,1),v.value+=q.value*k,v.units=v.units.concat(q.units))}for(var C=[],g=0;g<h.length;g++){var v=h[g];if(!(v.value<0||v.sign<0)||i){v.group?v.normal=v.group.addUnit(v.value):(v.unit=p(v.units,s(v.value)),v.normal=u(v.value,v.unit));var M=c(v,r,n);M&&M.normal&&C.push(M.normal)}}return C.join(w.separatorJoin)}function g(e,r,s,n){var a=l(e);if(!t(a)||!a.unitClass)return e;for(var u=a.unitClass.groups,o=a.conversions=[],d=0;d<u.length;d++){var c=u[d],m=a.convert(c.unit);if(i(m)&&!(i(r)&&r>m||i(s)&&m>s)){var p=new G(m,c.denominators,n);o.push(new k(m,p,c))}}return a}function f(e){M[e.className]=e,C.push(e);for(var t in e.converters)U[t]=e}function v(e){this.className=e,this.converters={},this.mapping={},this.bases={},this.groups=[],this.groupMap={}}function y(e,t,i,r,s,n,a){this.unit=e,this.baseUnit=t,this.baseScale=i,this.units=r,this.singular=s,this.plural=n,this.denominators=a}function q(e,t,i,r){this.value=e,this.unit=t,this.unitClass=i,this.group=i?i.groupMap[t]:null,this.normal=this.group?this.group.addUnit(e):r}function G(e,t,r){for(var s=Math.abs(Math.floor(e)-e),a=1,u=e,o=0;o<t.length&&s>w.epsilon;o++){var l=t[o],d=Math.round(e*l),c=Math.abs(d/l-e);if(i(r)&&l>r)break;c+w.epsilon<s&&(a=l,u=d,s=c)}this.value=e,this.numerator=u,this.denominator=a,this.actual=u/a,this.distance=s,this.whole=this.actual<0?Math.ceil(this.actual):Math.floor(this.actual),this.remainder=Math.abs(Math.round((e-this.whole)*a)),this.valid=1!==a||n(u),this.string="",1===a?this.string=u+"":0===this.whole?this.string=u+"/"+a:this.string=this.whole+" "+this.remainder+"/"+a}function k(e,t,i){this.decimal=e,this.fraction=t,this.group=i,this.shortUnit=i.unit,this.longUnit=t.valid?i.getUnit(t.isSingular()):i.getUnit(e),this.friendly=t.valid?t.string:e,this.shortNormal=u(this.friendly,this.shortUnit),this.longNormal=u(this.friendly,this.longUnit)}var w={},C=[],M={},U={};return v.prototype={addGroup:function(e,t,i,r,s,n){var a=i[0],u=a;t&&(e*=this.converters[t],u=this.bases[t]);for(var o=new y(a,u,e,i,s,n,r),l=0;l<i.length;l++){var d=i[l];this.converters[d]=e,this.bases[d]=u,this.groupMap[d]=o}return this.groups.push(o),o},addOneBaseConversion:function(e,t,i){e in this.mapping||(this.mapping[e]={}),this.mapping[e][t]=i},addBaseConversion:function(e,t,i){this.addOneBaseConversion(e,t,i),this.addOneBaseConversion(t,e,1/i)}},y.prototype={addUnit:function(e){return u(e,this.getUnit(e))},getUnit:function(e){return s(e)?this.singular:this.plural}},q.prototype={convert:function(e,s,n,a,o){var l=m(this,e);if(l!==!1&&s){var d=this.group?this.group.denominators:o;r(d)&&(l=new G(l,d,a),t(l)&&n&&e&&(l.string=u(l.string,e)))}return n&&i(l)&&e&&(l=u(l,e)),l},best:function(e,t){return c(this,e,t)}},q.fromNumber=function(e){return new q(e,"",null,e,null)},G.prototype={isSingular:function(){return 1===Math.ceil(Math.abs(this.actual))?1:0}},f(function(){var e=new v("Area");return e.addGroup(1,null,["sqin","sq. in.","sq in","in2","in^2","square inch","square inches"],[2,4,8,16],"square inch","square inches"),e.addGroup(144,"sqin",["sqft","sq. ft.","sq ft","ft2","ft^2","square foot","square feet"],[2,4,8,16],"square foot","square feet"),e.addGroup(9,"sqft",["sqyd","sq. yd.","sq yd","yd2","yd^2","square yard","square yards"],[2,3,4,8,9,16],"square yard","square yards"),e.addGroup(4840,"sqyd",["acre","acres"],[2,3,4,8,10],"acre","acres"),e.addGroup(640,"acre",["sqmi","sq. mi.","sq mi","mi2","mi^2","square mile","square miles"],[2,3,4,8,10],"square mile","square miles"),e.addGroup(1,null,["sqmm","sq. mm.","sq mm","mm2","mm^2","square millimeter","square millimeters"],[2,4,8,16],"square millimeter","square millimeters"),e.addGroup(100,"sqmm",["sqcm","sq. cm.","sq cm","cm2","cm^2","square centimeter","square centimeters"],[2,4,8,16],"square centimeter","square centimeters"),e.addGroup(1e4,"sqcm",["sqm","sq. m.","sq m","m2","m^2","square meter","square meters"],[2,4,8,16],"square meter","square meters"),e.addGroup(1e6,"sqm",["sqkm","sq. km.","sq km","km2","km^2","square kilometer","square kilometers"],[2,3,4,8,9,16],"square kilometer","square kilometers"),e.addBaseConversion("sqin","sqmm",645.16),e}()),f(function(){var e=new v("Digital");return e.addGroup(1,null,["bit","bits"],[],"bit","bits"),e.addGroup(4,"bit",["nibble","nibbles"],[],"nibble","nibbles"),e.addGroup(8,"bit",["b","byte","bytes"],[2,8],"byte","bytes"),e.addGroup(1024,"b",["kb","kilobyte","kilobytes"],[2,4,8,16],"kilobyte","kilobytes"),e.addGroup(1024,"kb",["mb","megabyte","megabytes"],[2,4,8,16],"megabyte","megabytes"),e.addGroup(1024,"mb",["gb","gigabyte","gigabytes"],[2,4,8,16],"gigabyte","gigabytes"),e.addGroup(1024,"gb",["tb","terabyte","terabytes"],[2,4,8,16],"terabyte","terabytes"),e.addGroup(1024,"tb",["pb","petabyte","petabytes"],[2,4,8,16],"petabyte","petabytes"),e.addGroup(1024,"pb",["eb","exabyte","exabytes"],[2,4,8,16],"exabyte","exabytes"),e.addGroup(1024,"bit",["kbit","kilobit","kilobits"],[2,4,8,16],"kilobit","kilobits"),e.addGroup(1024,"kbit",["mbit","megabit","megabits"],[2,4,8,16],"megabit","megabits"),e.addGroup(1024,"mbit",["gbit","gigabit","gigabits"],[2,4,8,16],"gigabit","gigabits"),e.addGroup(1024,"gbit",["tbit","terabit","terabits"],[2,4,8,16],"terabit","terabits"),e.addGroup(1024,"tbit",["pbit","petabit","petabits"],[2,4,8,16],"petabit","petabits"),e.addGroup(1024,"pbit",["ebit","exabit","exabits"],[2,4,8,16],"exabit","exabits"),e}()),f(function(){var e=new v("Length");return e.addGroup(1,null,["in","inch","inches",'"'],[2,3,4,8,16,32],"inch","inches"),e.addGroup(12,"in",["ft","foot","feet","'"],[2,3,4,12],"foot","feet"),e.addGroup(3,"ft",["yd","yds","yard","yards"],[3],"yard","yards"),e.addGroup(5280,"ft",["mi","mile","miles"],[2,3,4,5,6,7,8,9,10],"mile","miles"),e.addGroup(3,"mi",["league","leagues"],[2,3,4,5,6,7,8,9,10],"league","leagues"),e.addGroup(1,null,["mm","millimeter","millimeters"],[10],"millimeter","millimeters"),e.addGroup(10,"mm",["cm","centimeter","centimeters"],[2,4,10],"centimeter","centimeters"),e.addGroup(10,"cm",["dc","decimeter","decimeters"],[10],"decimeter","decimeters"),e.addGroup(100,"cm",["m","meter","meters"],[2,3,4,5,10],"meter","meters"),e.addGroup(1e3,"m",["km","kilometer","kilometers"],[2,3,4,5,6,7,8,9,10],"kilometer","kilometers"),e.addBaseConversion("in","mm",25.4),e}()),f(function(){var e=new v("Rotation");return e.addGroup(1,null,["deg","degs","degree","degrees"],[],"degree","degrees"),e.addGroup(1,null,["rad","rads","radian","radians"],[],"radian","radians"),e.addBaseConversion("deg","rad",.0174533),e}()),f(function(){var e=new v("Time");return e.addGroup(1,null,["ns","nanosecond","nanoseconds","nano","nanos"],[10,100],"nanosecond","nanoseconds"),e.addGroup(1e3,"ns",["us","microsecond","microseconds","micros","micro"],[10,100,1e3],"microsecond","microseconds"),e.addGroup(1e3,"us",["ms","millisecond","milliseconds","millis"],[10,100,1e3],"millisecond","milliseconds"),e.addGroup(1e3,"ms",["s","second","seconds","sec","secs"],[2,10,100,1e3],"second","seconds"),e.addGroup(60,"s",["min","minute","minutes","mins"],[2,3,4,60],"minute","minutes"),e.addGroup(60,"min",["hr","hour","hours","hrs"],[2,3,4,60],"hour","hours"),e.addGroup(24,"hr",["day","days"],[2,3,4,6,24],"day","days"),e.addGroup(7,"day",["wk","week","weeks","wks"],[7],"week","weeks"),e.addGroup(365.2425,"day",["yr","year","years","yrs"],[2,3,4,6,12,52],"year","years"),e}()),f(function(){var e=new v("Volume");return e.addGroup(1,null,["tsp","ts","tsps","teaspoon","teaspoons"],[2,3,4],"teaspoon","teaspoons"),e.addGroup(3,"tsp",["tbsp","tbsps","tablespoon","tablespoons"],[2,3,4],"tablespoon","tablespoons"),e.addGroup(6,"tsp",["oz","ounce","ounces","fl-oz","fl oz","floz","fluid ounce","fl. oz.","oz. fl.","oz fl"],[2,3,6],"fluid ounce","fluid ounces"),e.addGroup(8,"oz",["c","cup","cups"],[2,3,4],"cup","cups"),e.addGroup(2,"c",["pt","pint","pints"],[2,4,8],"pint","pints"),e.addGroup(4,"c",["qt","quart","quarts"],[2,4,8],"quart","quarts"),e.addGroup(4,"qt",["gal","gallon","gallons"],[2,4,8,16],"gallon","gallons"),e.addGroup(1,null,["ml","millilitre","millilitres"],[2,10],"millilitre","millilitres"),e.addGroup(1e3,"ml",["l","litre","litres"],[2,10],"litre","litres"),e.addGroup(1,null,["mm3","mm^3","cubic mm","cubic millimeter","cubic millimeters"],[2,4,8],"cubic millimeter","cubic millimeters"),e.addGroup(1e3,"mm3",["cm3","cm^3","cubiccmm","cubic centimeter","cubic centimeters"],[2,4,8],"cubic centimeter","cubic centimeters"),e.addGroup(1e6,"cm3",["m3","m^3","cubic m","cubic meter","cubic meters"],[2,4,8],"cubic meter","cubic meters"),e.addGroup(1e9,"m3",["km3","km^3","cubic km","meter","meters"],[2,4,8],"meter","meters"),e.addGroup(1,null,["in3","in^3","cubic in","cubic inch","cubic inches"],[2,4,8],"cubic inch","cubic inches"),e.addGroup(1728,"in3",["ft3","ft^3","cubic ft","cubic foot","cubic feet"],[2,4,8],"cubic foot","cubic feet"),e.addGroup(27,"ft3",["yd3","yd^3","cubic yd","cubic yard","cubic yards"],[2,4,8],"cubic yard","cubic yards"),e.addBaseConversion("tsp","ml",4.92892),e.addBaseConversion("ml","mm3",1),e.addBaseConversion("tsp","in3",.300781),e}()),f(function(){var e=new v("Weight");return e.addGroup(1,null,["mg","milligram","milligrams"],[2,10],"milligram","milligrams"),e.addGroup(1e3,"mg",["g","gram","grams"],[2,10,100],"gram","grams"),e.addGroup(1e3,"g",["kg","kilogram","kilograms","kilo","kilos"],[2,10,100],"kilogram","kilograms"),e.addGroup(1,null,["oz","ounce","ounces"],[2,3,4,16],"ounce","ounces"),e.addGroup(16,"oz",["lb","lbs","pound","pounds"],[2,3,4,16],"pound","pounds"),e.addGroup(2e3,"lb",["ton","tons","tonnes"],[2,3,4,10],"ton","tons"),e.addBaseConversion("mg","oz",35274e-9),e}()),w.classes=C,w.classMap=M,w.unitToClass=U,w.regex=/^\s*(-?\d*)(\s+(\d+))?(\/(\d+)|\.(\d+)|)\s*(.*)\s*$/i,w.epsilon=.001,w.separator=",",w.separatorJoin=", ",w.heuristicLength=3,w.parse=d,w.parseInput=l,w.convert=m,w.best=c,w.splitInput=o,w.combine=b,w.subtract=h,w.isHeuristicMatch=a,w.conversions=g,w.isSingular=s,w.isWhole=n,w.findUnit=p,w.addClass=f,w.Class=v,w.Group=y,w.Parsed=q,w.Fraction=G,w});
//# sourceMappingURL=unitz.min.js.map
